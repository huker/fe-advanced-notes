## promise

### 基础概念

- 3状态：pending fulfilled rejected
- new Promise的参数是个executor执行器（会直接执行的）
- 状态是不可更改的 走了resolve就不会再走reject
- 错误都会走reject 比如throw Error
- promiseA+规范

代码：1.js深入内容 -> promise -> 1

### 解决异步

- 主要是解决异步问题 发布订阅模式

代码：1.js深入内容 -> promise -> 2

### 链式调用

- 调用then return一个新的promise
- 统一处理then的结果
  - 常量
  - promise（兼容各种promise），是promise的话取执行结果
  - 递归，promise里可能继续套了promise
  - 状态不可变
- 值的穿透
- 测试自己写的promise是否符合promiseA+规范

代码：1.js深入内容 -> promise -> 3

### promise相关知识

1.如何终止中断一个promise

- 链式调用里 返回一个pending的promise 可以中断链式

- 比如promise执行3秒 想在2s的时候就reject掉 可以借助race 第一个失败了就都失败了

2.Promise.resolve(fn())会等待fn执行完再得到结果，无论是异步还是同步，所以在finally或try中都可以通过这做到获取到结果再then/catch

代码: 1.js深入内容 -> promise -> finnaly实现.js
